<head>
<script>
var t1 = [[ 4.50000000e+02,  2.36736842e+02, -1.13950516e-13],
 [ 8.63500000e+02, -2.63157895e-01,  3.37400000e+02]];

onload = function() {
	for(var i=0; i<20; i++){
		for(var j=0;j<=5; j++){
		draw(t1,linzi1,'c1',i,j, 1, i*250, j*250, true);	
		}
	}
	
};


</script>
<script src="main.js"></script>
</head>
<body>
<div style="background-color: yellow; width: 5000px; height: 2040px;">
<canvas id="c1" width="5000" height="1640" ></canvas>
<hr>
<canvas id="c2" width="240" height="240" style="border:1px solid black"></canvas>
</div>
<hr>
<h1>「第6回燐字書き取り」分割</h1>
<p>なんか知らんけど第6回だそうな。</p>
<p>今回から画質が上がったので面倒なんだよな。</p>
<h2>1. さて</h2>
<p>原稿用紙の表の4頂点に位置する4字の（マスの左上の）座標をGIMPで取ると、</p>
<pre>
      y1,   y2       s1 s2
左上:  450,  864 --->  0, 0
右上: 4948,  858 ---> 19, 0
左下:  450, 2550 --->  0, 5
右下: 4948, 2546 ---> 19, 5
</pre>
<p>である。うまいパラメータt<sub>10</sub>, t<sub>11</sub>, t<sub>12</sub>, t<sub>20</sub>, t<sub>21</sub>, t<sub>22</sub>を持ってきて、</p>
<img src="matrix.png" width="780"/>
<p>となるようにしてやれば良い。ただしs<sub>0</sub>たちは全部1である。</p>
<p>Y ≒ TSで最小二乗法をやるのでYS<sup>T</sup>=TSS<sup>T</sup>を解けばよく、T=YS<sup>T</sup>(SS<sup>T</sup>)<sup>-1</sup>なのでTは</p>
<pre>
[[ 4.50000000e+02  2.36736842e+02 -1.13950516e-13]
 [ 8.63500000e+02 -2.63157895e-01  3.37400000e+02]]
</pre>
<p>なるほど。実際にやってみると上手くいったのでやったぜ。</p>


<h2>3. 分割して保存</h2>
<p>それぞれの画像に分割して保存していかねば。</p>
<p>今回もPythonを使う。</p>


</body>
