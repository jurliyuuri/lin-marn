<head></head>
<body>
<h1>「第16回燐字書き取り」分割</h1>
<p>第16回ですかー</p>
<p>分割した画像は<a href="./img.png">これ</a>。</p>
<h2>1. leastsquare.py</h2>
<p>私(skarsna.meloviliju)にとって二度目の作業、13回のログをたよりに行う。</p>
<p>原稿の四隅(1枚目)に位置する4字の（マスの<strong>左上</strong>の）座標をGIMPで取ると、</p>
<pre>
      y1,   y2       s1 s2
左上:   58,   58 --->  0, 0
右上:  921,   58 --->  9, 0
左下:   58, 1314 --->  0,19
右下:  920, 1314 --->  9,19
</pre>
<p>だったので、これをleastsquare.pyのsとyに突っ込んでやると下の理論が動いて必要な行列がでるらしい。科学の力ってすごいね。</p>
<p>うまいパラメータt<sub>10</sub>, t<sub>11</sub>, t<sub>12</sub>, t<sub>20</sub>, t<sub>21</sub>, t<sub>22</sub>を持ってきて、</p>
<img src="../燐字表示14/matrix.png" width="780"/>
<p>となるようにしてやれば良い。ただしs<sub>0</sub>たちは全部1。</p>
<p>Y ≒ T<sub>1</sub>Sで最小二乗法をやるのでYS<sup>T</sup>=T<sub>1</sub>SS<sup>T</sup>を解けばよく、T<sub>1</sub>=YS<sup>T</sup>(SS<sup>T</sup>)<sup>-1</sup>なのでT<sub>1</sub>は</p>
<pre>
[[ 2.81250000e+03  1.43000000e+02 -5.26315789e-02]
[ 3.17000000e+02  0.00000000e+00  9.92631579e+01]]
</pre>
<p>ほーん。</p>
<br>
<h2>2. split.py</h2>
<p>linziListに燐字の表を打ち込む。これが一番疲れた。どういう対応かは画像とファイル見て察してほしい。</p>
<p>split.pyを走らせる。</p>
<pre>SystemError: tile cannot extend outside image</pre>
<p>は？</p>
<p>存在しない画像範囲にアクセスして死んでるらしいが、<a href="../燐字表示13/index.html">前回</a>と違って出力画像が見えない。</p>
<p>j.v.の力を借りて30分ほど粘ったが、プログラムには問題がなさそうということでファイル形式を確認したところ、jpgファイルを使用していることが「判明」。</p>
<p><b><u>jpgは座標でなんか悪さをするらしいのでGIMPでpng化</u></b>してsplit.pyを走らせるとうまくいった。よかったね。</p>

</body>
