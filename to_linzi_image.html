<script src="image_table/char_and_folder_info.js"></script>
<script src="image_table/image_existence_table.js"></script>
<script>
	var precedence = ["SY", "jv", "noborder", "border"];

	function getImage(character, type_prec){
		var prec = [];
		
		for (var i = 0; i < type_prec.length; i++) {
			prec = prec.concat(folder_names.filter(a => folder_type[a] === type_prec[i]));
		}

		if(!IMAGE_EXISTENCE_TABLE[character]){
			return `（「${character}」未定義）`
		}
		for(var j=0; j<prec.length;j++){
			if(IMAGE_EXISTENCE_TABLE[character][prec[j]]){
				return `<img src='${prec[j]}/${character}.png' width='100' height='100' />`
			}
		}

		if (defined_but_no_image_prepared.includes(character)) {
			return `（「${character}」画像なし）`
		} else {
			return `（「${character}」未造字）`
		}
		
	}

	function draw(prec){
		document.getElementById("res").innerHTML = 
			document.getElementById('inputs').value.split(" ")
			.map(function(txt){
					var ans = "";
					for(var i=0; i<txt.length;i++){
						ans += getImage(txt[i], prec);
					}
					return ans;
				})
			.join("<br><br>");
		
	}

	function sy() {
		precedence = ["SY", "jv", "noborder", "border"];
		draw(precedence);
	}

	function jv() {
		precedence = ["jv", "SY", "noborder", "border"];
		draw(precedence);
	}

	function noborder() {
		precedence = ["noborder", "border", "SY", "jv"];
		draw(precedence);
	}


	function border() {
		precedence = ["border", "noborder", "SY", "jv"];
		draw(precedence);
	}
</script>
<p><a href="lin-marn.html">トップに戻る</a></p>
備考：<a href="linzi_image_table.html">元データ</a>からも分かるように、2019年2月3日現在、
<table border="1">
	<tr><td>字</td><td>bitmap</td><td>SY</td><td>j.v</td></tr>
	<tr><td>王</td><td>✔</td><td>✔</td><td>✔</td></tr>
	<tr><td>互父</td><td>✗</td><td>✔</td><td>✔</td></tr>
	<tr><td>雪助</td><td>✗</td><td>✔</td><td>✗</td></tr>
	<tr><td>輝麗</td><td>✗</td><td>✗</td><td>✔</td></tr>
	<tr><td>倒</td><td>✗</td><td>✗</td><td>✗</td></tr>
</table>
<p>である。bitmapがあるものについては必ずSYもj.vもある。</p>
<div>
優先する書体：	<br>
<label><input type="radio" name="precedence" checked onclick='sy();'>SYの書いた字</label><br>
<label><input type="radio" name="precedence" onclick='jv();'>j.vの書いた字</label><br>
<label><input type="radio" name="precedence" onclick='noborder();'>枠なしビットマップ</label><br>
<label><input type="radio" name="precedence" onclick='border();'>枠つきビットマップ</label><br>
</div>
<input type="text" value="王冠之光満全族 心善受助 互雪父輝麗倒須㍂" id="inputs" style="font-size:100%" size="40" />

<input type="button" onclick="draw(precedence)" value="変換">
<div style="visibility: hidden"><label>拡大率:<input id="prop" type="number" name="number" required="required" value="20">%</label></div>
<div id="res"></div>